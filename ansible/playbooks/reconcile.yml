---
- name: Manager â€” Cloudflare Zero Trust Operator
  hosts: localhost
  gather_facts: false
  vars:
    operator_namespace: "{{ lookup('env', 'OPERATOR_NAMESPACE') | default('cloudflare-zero-trust', true) }}"

  tasks:
    - name: Display manager startup
      ansible.builtin.debug:
        msg:
          - "=== manager starting ==="
          - "Operator Namespace: {{ operator_namespace }}"

    - name: Check OperatorConfig and manage worker Deployments
      include_role:
        name: operator_config
      vars:
        operator_namespace: "{{ operator_namespace }}"
